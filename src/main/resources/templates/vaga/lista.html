<!DOCTYPE html>
<html layout:decorate="~{layout}">
<head>
    <meta charset="UTF-8" />
    <title>Vagas abertas</title>
</head>
<body>
    <section class="layout-content" layout:fragment="corpo">
        <div class="container">
            <form th:action="@{/vagas/listar}" method="GET" class="busca">
                <input type="text" id="filterLocation" name="cidade" 
                       placeholder="Filtrar por cidade..." th:value="${param.cidade}" />
                <button type="submit" class="button-style">Buscar Vaga</button>
            </form>

            <div th:each="vaga : ${vagas}" class="job-card">
                <div class="job-card-header">
                    <h2 th:text="${vaga.titulo}">Título da vaga</h2>
                    <span class="deadline" th:text="${#dates.format(vaga.dataLimiteInscricao, 'dd/MM/yyyy')}">xx/xx/xxxx</span>
                </div>
                <div class="job-details">
                    <span class="bold" th:text="${#numbers.formatCurrency(vaga.remuneracao)}">remuneração</span>
                </div>
                <div class="job-details company-info">
                    <span th:text="${vaga.empresa.nome}">Empresa ABC</span>
                    <a th:href="@{'/empresas/' + ${vaga.empresa.id} + '/vagas'}">
                            + <span>x</span> anúncios dessa empresa!
                    </a>
                </div>
                <span th:text="${vaga.descricao}">descrição blablabla...</span>
                <div class="job-footer">
                    <span class="company-info" th:text="${vaga.cidade} + ' - ' + ${vaga.estado}">cidade - XX</span>
                    <a th:href="@{/candidaturas/candidatar/{idVaga}(idVaga=${vaga.id})}" class="button-style">Candidatar-se</a>
                </div>
            </div>

            <div th:if="${#lists.isEmpty(vagas)}" class="job-card" style="text-align: center; color: #777;">
                <p>Nenhuma vaga encontrada no momento. Por favor, tente mais tarde.</p>
            </div>

        </div>
    </section>
</body>
</html>
